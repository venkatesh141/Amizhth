Refresh Token â€“ Simple Flow

ðŸ‘‰ Step 1: User sends refresh token to /refreshtoken API.

ðŸ‘‰ Step 2: System tries to extract username from the refresh token.

If token format is wrong â†’ return INVALID_REFRESH_TOKEN

If token is expired â†’ return TOKEN_EXPIRED

ðŸ‘‰ Step 3: Load user details using the extracted username.

ðŸ‘‰ Step 4: Validate the refresh token with user details.

If validation fails â†’ return INVALID_REFRESH_TOKEN

ðŸ‘‰ Step 5: If valid, update user session in session cache (new session ID).

ðŸ‘‰ Step 6: Generate a new access token.

ðŸ‘‰ Final Result:

If invalid â†’ return 401 Unauthorized

If expired â†’ return 401 Unauthorized

If valid â†’ return new access token to the user

ðŸ”„ In One Line

Validate refresh token â†’ Load user â†’ Verify token â†’ Create new access token â†’ Return it.
