Change Password â€“ Simple Flow

ðŸ‘‰ Step 1: User calls /changepassword API.

ðŸ‘‰ Step 2: System gets the currently logged-in user using the username from JWT token.

ðŸ‘‰ Step 3: Check if old password and new password are same.

If same â†’ throw OLD_AND_NEW_PASSWORD_SAME error.

ðŸ‘‰ Step 4: If old password is provided:

Decrypt old password.

Compare it with stored password using password encoder.

If not matching â†’ throw INVALID_OLD_PASSWORD.

ðŸ‘‰ Step 5: If old password is correct (or not required):

Decrypt new password.

Encode (hash) the new password.

Save updated password in database.

ðŸ‘‰ Step 6: Save user details.

ðŸ‘‰ Final Result:
Return Success response.

ðŸ”„ In One Line

Validate old password â†’ Encrypt new password â†’ Save â†’ Return success.
